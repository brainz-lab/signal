<div class="max-w-2xl space-y-6">
  <!-- Breadcrumb -->
  <div class="flex items-center gap-2">
    <%= link_to dashboard_project_rules_path(@project), class: "flex items-center gap-1 text-[13px] font-medium transition-colors hover:text-signal dm-text-muted" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
      Rules
    <% end %>
    <span class="dm-text-muted">/</span>
    <span class="text-[13px] font-medium dm-text">New Rule</span>
  </div>

  <div>
    <h1 class="text-[24px] font-semibold tracking-tight dm-text">Create Alert Rule</h1>
    <p class="text-[14px] mt-1 dm-text-muted">Define conditions to trigger alerts when metrics cross thresholds</p>
  </div>

  <div class="rounded-2xl px-6 py-6 shadow-card dm-card">
    <%= form_with model: @rule, url: dashboard_project_rules_path(@project), method: :post, class: "space-y-6" do |f| %>
      <!-- Basic Info -->
      <div class="space-y-4">
        <div class="flex items-center gap-2">
          <div class="w-6 h-6 rounded-lg flex items-center justify-center" style="background: var(--gradient-warning);">
            <svg class="w-3.5 h-3.5" style="color: var(--dm-brand);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          </div>
          <h2 class="text-[15px] font-semibold dm-text">Basic Info</h2>
        </div>
        <div>
          <%= f.label :name, class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
          <%= f.text_field :name, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input", placeholder: "High Error Rate" %>
        </div>
        <div>
          <%= f.label :description, class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
          <%= f.text_area :description, rows: 2, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all resize-none dm-input", placeholder: "Alert when error count exceeds threshold" %>
        </div>
      </div>

      <!-- Source -->
      <div class="space-y-4 pt-5 border-t dm-border-light">
        <div class="flex items-center gap-2">
          <div class="w-6 h-6 rounded-lg flex items-center justify-center" style="background: var(--gradient-info);">
            <svg class="w-3.5 h-3.5" style="color: #7C3AED;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/></svg>
          </div>
          <h2 class="text-[15px] font-semibold dm-text">Data Source</h2>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <%= f.label :source, class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
            <%= f.select :source, [['Flux (Metrics)', 'flux'], ['Pulse (APM)', 'pulse'], ['Reflex (Errors)', 'reflex'], ['Recall (Logs)', 'recall']], {}, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input" %>
          </div>
          <div>
            <%= f.label :source_name, "Metric/Event Name", class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
            <%= f.text_field :source_name, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input", placeholder: "error_count" %>
          </div>
        </div>
      </div>

      <!-- Condition -->
      <div class="space-y-4 pt-5 border-t dm-border-light">
        <div class="flex items-center gap-2">
          <div class="w-6 h-6 rounded-lg flex items-center justify-center" style="background: var(--gradient-blue);">
            <svg class="w-3.5 h-3.5" style="color: #2563EB;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
          </div>
          <h2 class="text-[15px] font-semibold dm-text">Condition</h2>
        </div>
        <div class="grid grid-cols-4 gap-4">
          <div>
            <%= f.label :rule_type, "Type", class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
            <%= f.select :rule_type, [['Threshold', 'threshold'], ['Anomaly', 'anomaly'], ['Absence', 'absence']], {}, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input" %>
          </div>
          <div>
            <%= f.label :operator, class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
            <%= f.select :operator, [['>', 'gt'], ['>=', 'gte'], ['<', 'lt'], ['<=', 'lte'], ['=', 'eq'], ['!=', 'neq']], {}, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input" %>
          </div>
          <div>
            <%= f.label :threshold, class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
            <%= f.number_field :threshold, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input", placeholder: "100" %>
          </div>
          <div>
            <%= f.label :window, class: "block text-[13px] font-medium mb-1.5 dm-text-secondary" %>
            <%= f.select :window, [['1 minute', '1m'], ['5 minutes', '5m'], ['15 minutes', '15m'], ['1 hour', '1h']], {}, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input" %>
          </div>
        </div>
      </div>

      <!-- Severity -->
      <div class="space-y-4 pt-5 border-t dm-border-light">
        <div class="flex items-center gap-2">
          <div class="w-6 h-6 rounded-lg flex items-center justify-center" style="background: var(--gradient-error);">
            <svg class="w-3.5 h-3.5 text-error" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
          </div>
          <h2 class="text-[15px] font-semibold dm-text">Severity</h2>
        </div>
        <div>
          <%= f.select :severity, [['Info', 'info'], ['Warning', 'warning'], ['Critical', 'critical']], {}, class: "w-full px-4 py-2.5 rounded-xl text-[14px] outline-none transition-all dm-input" %>
        </div>
      </div>

      <div class="flex items-center gap-3 pt-5">
        <%= f.submit "Create Rule", class: "px-5 py-2.5 text-[13px] font-medium rounded-xl cursor-pointer transition-all dm-btn-primary text-white" %>
        <%= link_to "Cancel", dashboard_project_rules_path(@project), class: "px-5 py-2.5 text-[13px] font-medium rounded-xl transition-all dm-btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>
