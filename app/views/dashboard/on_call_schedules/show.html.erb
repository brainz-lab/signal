<div class="space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <div class="flex items-center gap-2 mb-1">
        <%= link_to "On-Call Schedules", dashboard_project_on_call_schedules_path(@project), class: "text-[13px] dm-text-muted" %>
        <span class="dm-text-muted">/</span>
      </div>
      <h1 class="text-[24px] font-semibold dm-text"><%= @schedule.name %></h1>
    </div>

    <div class="flex items-center gap-2">
      <%= link_to "Edit", edit_dashboard_project_on_call_schedule_path(@project, @schedule), class: "px-4 py-2 text-[13px] font-medium rounded-lg transition-colors dm-btn-primary" %>
    </div>
  </div>

  <!-- Status -->
  <div class="flex items-center gap-4">
    <% if @schedule.enabled %>
      <span class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-success text-success">
        <span class="w-2 h-2 rounded-full" style="background: var(--color-success-dot);"></span>
        <span class="text-[13px] font-medium">Enabled</span>
      </span>
    <% else %>
      <span class="flex items-center gap-2 px-3 py-1.5 rounded-full" style="background: var(--color-border-light); color: var(--color-text-subtle);">
        <span class="w-2 h-2 rounded-full" style="background: var(--color-icon-muted);"></span>
        <span class="text-[13px] font-medium">Disabled</span>
      </span>
    <% end %>

    <span class="px-3 py-1.5 text-[13px] font-medium rounded-full capitalize" style="background: var(--color-border-light); color: var(--color-text-subtle);"><%= @schedule.schedule_type %></span>
    <span class="px-3 py-1.5 text-[13px] font-medium rounded-full" style="background: var(--color-border-light); color: var(--color-text-subtle);"><%= @schedule.timezone %></span>
  </div>

  <!-- Current On-Call -->
  <div class="rounded-xl px-5 py-4" style="border: 2px solid var(--color-signal); background: var(--gradient-on-call);">
    <h3 class="text-[13px] font-medium mb-2" style="color: var(--color-signal-dark);">Currently On-Call</h3>
    <% if @schedule.current_on_call.present? %>
      <p class="text-[20px] font-semibold dm-text"><%= @schedule.current_on_call %></p>
      <% if @schedule.current_shift_start && @schedule.current_shift_end %>
        <p class="text-[13px] mt-1" style="color: var(--color-signal-dark);">
          <%= @schedule.current_shift_start.strftime('%b %d, %H:%M') %> - <%= @schedule.current_shift_end.strftime('%b %d, %H:%M') %>
        </p>
      <% end %>
    <% else %>
      <p class="text-[16px] font-medium dm-text-placeholder">No one currently on call</p>
    <% end %>
  </div>

  <!-- Schedule Details -->
  <div class="grid grid-cols-2 gap-6">
    <div class="dm-card px-5 py-4">
      <h3 class="text-[13px] font-medium mb-3 dm-text-muted">Schedule Details</h3>
      <dl class="space-y-2">
        <div class="flex justify-between">
          <dt class="text-[13px] dm-text-placeholder">Type</dt>
          <dd class="text-[13px] font-medium capitalize dm-text"><%= @schedule.schedule_type %></dd>
        </div>
        <div class="flex justify-between">
          <dt class="text-[13px] dm-text-placeholder">Timezone</dt>
          <dd class="text-[13px] font-medium dm-text"><%= @schedule.timezone %></dd>
        </div>
        <% if @schedule.schedule_type == 'custom' && @schedule.rotation_type %>
          <div class="flex justify-between">
            <dt class="text-[13px] dm-text-placeholder">Rotation</dt>
            <dd class="text-[13px] font-medium capitalize dm-text"><%= @schedule.rotation_type %></dd>
          </div>
          <% if @schedule.rotation_start %>
            <div class="flex justify-between">
              <dt class="text-[13px] dm-text-placeholder">Started</dt>
              <dd class="text-[13px] font-medium dm-text"><%= @schedule.rotation_start.strftime('%Y-%m-%d') %></dd>
            </div>
          <% end %>
        <% end %>
        <div class="flex justify-between">
          <dt class="text-[13px] dm-text-placeholder">Created</dt>
          <dd class="text-[13px] font-medium dm-text"><%= @schedule.created_at.strftime('%Y-%m-%d') %></dd>
        </div>
      </dl>
    </div>

    <div class="dm-card px-5 py-4">
      <h3 class="text-[13px] font-medium mb-3 dm-text-muted">Team Members</h3>
      <% if @schedule.members.present? && @schedule.members.any? %>
        <ul class="space-y-2">
          <% @schedule.members.each do |member| %>
            <li class="flex items-center gap-2">
              <span class="w-6 h-6 flex items-center justify-center rounded-full text-[11px] font-medium" style="background: var(--color-signal); color: #FFFFFE;">
                <%= member.to_s.chars.first.upcase %>
              </span>
              <span class="text-[13px] dm-text"><%= member %></span>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-[13px] dm-text-muted">No members configured</p>
      <% end %>
    </div>
  </div>

  <!-- Weekly Schedule -->
  <% if @schedule.schedule_type == 'weekly' && @schedule.weekly_schedule.present? %>
    <div class="dm-card px-5 py-4">
      <h3 class="text-[13px] font-medium mb-3 dm-text-muted">Weekly Schedule</h3>
      <div class="grid grid-cols-7 gap-2">
        <% %w[monday tuesday wednesday thursday friday saturday sunday].each do |day| %>
          <div class="text-center">
            <p class="text-[11px] font-medium uppercase mb-1 dm-text-muted"><%= day[0..2] %></p>
            <div class="rounded-lg px-2 py-2 bg-surface-alt border dm-border">
              <p class="text-[12px] font-medium dm-text">
                <%= @schedule.weekly_schedule.dig(day, 'user') || '-' %>
              </p>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
